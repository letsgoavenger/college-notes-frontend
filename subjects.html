<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Subjects</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<header class="navbar">
  <div class="nav-left">
    ðŸŽ“ <span>Study with Vp</span>
    <small>Select Subject</small>
  </div>
</header>

<section class="hero">
  <h1>Available Subjects</h1>
  <p>Select a subject to view notes and question papers</p>
</section>

<section class="features" id="subjectList">
  <!-- Subjects load here -->
</section>

<script>
const params = new URLSearchParams(location.search);
const branch = params.get("b");
const sem = params.get("s");

fetch("https://college-notes-backend-production.up.railway.app/files")
.then(res => res.json())
.then(data => {
  const subjects = [...new Set(
    data.filter(d => d.branch === branch && d.semester === sem)
        .map(d => d.subject)
  )];

  const container = document.getElementById("subjectList");

  subjects.forEach(sub => {
    container.innerHTML += `
      <div class="feature" onclick="openFiles('${sub}')">
        ðŸ“š
        <h4>${sub}</h4>
        <p>View notes & question papers</p>
      </div>
    `;
  });
});

function openFiles(sub) {
  location.href = `files.html?b=${branch}&s=${sem}&sub=${sub}`;
}
</script>

</body>
</html>
