<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Study Materials</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<header class="navbar">
  <div class="nav-left">
    ğŸ“ <span>Study with Vp</span>
    <small>Downloads</small>
  </div>
</header>

<section class="hero">
  <h1>Study Materials</h1>
  <p>Download notes and question papers instantly</p>
</section>

<section class="features" id="fileList">
  <!-- Files load here -->
</section>

<script>
const params = new URLSearchParams(location.search);
const branch = params.get("b");
const sem = params.get("s");
const subject = params.get("sub");

fetch("https://college-notes-backend-production.up.railway.app/files")
.then(res => res.json())
.then(data => {
  const files = data.filter(f =>
    f.branch === branch &&
    f.semester === sem &&
    f.subject === subject
  );

  const container = document.getElementById("fileList");

  files.forEach(f => {
    container.innerHTML += `
      <div class="feature">
        â¬‡ï¸
        <h4>${f.filename}</h4>
        <p>${f.type.toUpperCase()}</p>
        <a href="https://college-notes-backend-production.up.railway.app/uploads/${f.branch}/${f.filename}" download>
          Download PDF
        </a>
      </div>
    `;
  });
});
</script>

</body>
</html>
